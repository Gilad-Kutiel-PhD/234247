נניח שנתון לנו קובץ טקסט מעל א"ב
$\Sigma$,
וכן נתונה לנו פונקציה שמתארת את מספר המופעים של כל תו בקובץ
$f:\Sigma \to \mathbb{N}$
נרצה למצוא קוד חסר רישות (עץ בינרי) שיקודד את הקובץ במינימום סיביות, כלומר:
$$
\min_c \sum_{a \in \Sigma}|c(a)| \cdot f(a)
$$

במונחים של עצים נרצה למצוא עץ שממזער את הערך
$$
\min_c \sum_{a \in \Sigma}d(a) \cdot f(a)
$$

כאשר 
$d(a)$
הוא עומק העלה שמתאים לתו $a$ בעץ.

לעץ שממזער את הערך הנ"ל נקרא 
\emph{עץ האפמן}

\begin{claim}
כל עץ האפמן הוא עץ מלא (לכל צומת פנימי יש שני בנים)
\end{claim}

\begin{proof}
נסתכל על עץ האפמן שממזער את מספר הצמתים הפנימיים עם בן אחד,
נניח בשלילה שיש בן כזה
אז אפשר להחליף צומת כזה עם הבן שלו ולהקטין את ערך העץ
\end{proof}

\begin{claim}
אם 
$a,b \in \Sigma$
שני איברים בעלי ערך 
$f$
מינימלי, 
אז קיים עץ האפמן שבו $a$ ו-$b$ הם אחים ובעלי עומק מקסימלי
\end{claim}

\begin{proof}
אם לא, נבחר שני עלים אחים בעלי עומק מקסימלי ונחליף אותם עם $a$ ו-$b$.
\end{proof}

\begin{lemma}
אם 
$a,b \in \Sigma$
שני איברים בעלי ערך 
$f$
מינימלי, 
נגדיר 
$\Sigma' = \Sigma \setminus \{a,b\} \cup \{z\}$
כאשר
$z \notin \Sigma$.
כמו כן נגדיר
$f(z) = f(a) + f(b)$.

אם $'T$ עץ האפמן של 
$\Sigma'$
אז העץ $T$ שמתקבל מ-$'T$ על ידי החלפה של העלה $z$ בצומת פנימי עם שני בנים $a$ ו-$b$ הוא עץ
האפמן של 
$\Sigma$.
\end{lemma}

\begin{proof}
ניקח עץ האפמן
$\hat{T}$
על 
$\Sigma$
שבו $a$ ו-$b$ אחים.
ממנו נייצר עץ 
$\hat{T}'$
על 
$\Sigma'$
על ידי איחוד העלים $a$ ו-$b$ לעלה $z$.
נראה שמתקיים 
$$
w(T) = w(T') + f(a) + f(b) \leq w(\hat{T}') + f(a) + f(b) = w(\hat{T})
$$

\end{proof}
